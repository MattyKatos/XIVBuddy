<!DOCTYPE html>
<html>
<head>
  <title>Register New Farming Plot - XIVBuddy</title>
</head>
<body>
  <%- include('partials/navbar.ejs') %>
  <h1>Register New Farming Plot</h1>
  <form method="POST" action="/plots/new">
    <label>House:<br>
      <select name="houseId" required>
        <option value="">-- Select House --</option>
        <% houses.forEach(function(house) { %>
          <option value="<%= house.id %>"><%= house.district %> Ward <%= house.ward %> Plot <%= house.plot %></option>
        <% }); %>
      </select>
    </label><br><br>
    <label>Plot Name:<br>
      <input type="text" name="name" required>
    </label><br><br>
    <label>Plot Type:<br>
      <select name="type" id="plotType" required onchange="updateBeds()">
        <option value="">-- Select Type --</option>
        <option value="Delux Garden Patch">Delux Garden Patch (8 beds)</option>
        <option value="Oblong Garden Patch">Oblong Garden Patch (6 beds)</option>
        <option value="Round Garden Patch">Round Garden Patch (4 beds)</option>
        <option value="Flowerpot">Flowerpot (1 bed)</option>
      </select>
    </label><br><br>
    <label>Beds:<br>
      <input type="number" name="beds" id="bedsInput" readonly required>
    </label><br><br>
    <button type="submit">Register Plot</button>
  </form>
  <script>
    function updateBeds() {
      var type = document.getElementById('plotType').value;
      var beds = 0;
      if (type === 'Delux Garden Patch') beds = 8;
      else if (type === 'Oblong Garden Patch') beds = 6;
      else if (type === 'Round Garden Patch') beds = 4;
      else if (type === 'Flowerpot') beds = 1;
      document.getElementById('bedsInput').value = beds;
    }
  </script>
  <a href="/plants">Back to Farming Plots</a>
</body>
</html>
